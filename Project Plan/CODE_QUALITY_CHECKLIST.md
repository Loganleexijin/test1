# 代码质量审查清单 (Code Quality Checklist)

为确保项目长期健康发展，每次提交代码或进行重大功能更新前，请按照以下流程进行自我检视。

## 1. 类型安全 (Type Safety)
- [ ] **拒绝 `any`**: 严禁在业务逻辑中使用 `any` 类型。
    - *风险*: `any` 会屏蔽 TypeScript 的类型检查，导致运行时错误（如 `undefined is not a function`）。
    - *修复*: 为所有数据结构定义 `interface` 或 `type`。如果不确定类型，优先使用 `unknown` 并配合类型守卫（Type Guard）。
- [ ] **接口同步**: 前后端数据交互时，确保前端的 `interface` 与后端返回的 JSON 结构完全一致。
- [ ] **参数校验**: 函数参数应有明确的类型定义，避免隐式 `any`。

## 2. API 安全与健壮性 (API Security & Robustness)
- [ ] **输入验证**: 所有后端 API 接收的参数（`req.body`, `req.query`）必须经过校验。
    - *风险*: 恶意用户可能发送非法数据（如负数时间、SQL注入字符串）导致服务器崩溃或数据污染。
    - *修复*: 使用简单的 `if` 判断或引入校验库（如 `zod`, `joi`）。
- [ ] **错误处理**: 所有异步操作（数据库读写、外部 API 调用）必须包裹在 `try-catch` 中。
    - *规范*: 捕获错误后，应返回标准的 HTTP 错误码（400, 500）和清晰的错误信息，而不是让请求挂起。
- [ ] **权限控制**: 敏感接口（如修改用户数据）应检查用户权限（即使目前是本地运行，也要预留鉴权逻辑）。

## 3. 状态管理 (State Management)
- [ ] **逻辑分离**: 前端 Store (`zustand`) 只负责状态分发和 API 调用，不应包含复杂的业务计算逻辑。
- [ ] **单一数据源**: 避免在组件内部 (`useState`) 和全局 Store 中重复存储同一份数据，防止状态不同步。
- [ ] **清理废代码**: 及时删除不再使用的 Action 或 State，避免 Store 变得臃肿。

## 4. 文件与结构 (Structure & Cleanliness)
- [ ] **僵尸文件清理**: 定期扫描并删除未被引用的组件、图片或工具函数。
- [ ] **硬编码检查**: 所有的配置项（API 地址、数据库路径、常量字符串）应提取到配置文件或常量文件中，禁止在代码中硬编码。
- [ ] **组件复用**: 如果一段 JSX 代码被复制粘贴了两次以上，请将其提取为独立组件。

## 5. 性能 (Performance)
- [ ] **按需加载**: 路由级别是否使用了懒加载 (`React.lazy`)？
- [ ] **依赖检查**: 是否引入了过大的第三方库（如为了一个函数引入整个 `lodash`）？

---

## 执行流程
1. **开发前**: 阅读此清单，明确本次开发的质量目标。
2. **开发中**: 每完成一个功能模块，对照相关条目进行自查。
3. **提交前**: 全局搜索 `any` 关键字，确保无新增违规项；检查控制台是否有新的 Warning。
