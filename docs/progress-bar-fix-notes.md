Flux 灵动圆环与阶段交互规范 v2.0

## 1. 🧹 修改日志 (Change Log) - 已移除的旧逻辑

* ❌ **移除**：点击“开始”后立即切换至 #4B0082 (深海蓝) 的硬切换逻辑。（**新逻辑**：颜色应由当前时长所在的“阶段”决定，初始为暖橙色）。
* ❌ **移除**：放射层 (Radiating Layer) 及涟漪动画。（**新逻辑**：改为平滑的颜色渐变流动与粒子浮动）。
* ❌ **移除**：关于“各动画间隔错开启动”的复杂时序。（**新逻辑**：状态驱动，自然过渡）。

---

## 2. ⭕️ 灵动圆环技术规范 (Technical Specs)

### 2.1 初始状态与重置

* **SVG 路径**：`stroke-dasharray` 固定为 **678px**（完整圆周）。
* **初始偏移**：`stroke-dashoffset` 初始值必须设为 **678px**（进度 0%），确保圆环视觉上完全未闭合。
* **颜色初始化**：默认加载 **Phase 1 (消化期)** 的色值配置（`from-orange-400 to-amber-500`）。
* **抗闪烁**：组件挂载时禁止使用 `setTimeout` 延迟显示颜色，必须利用 React 状态同步渲染初始色值。

### 2.2 动态计算公式

严格遵循以下公式更新 SVG 属性：

```javascript
const CIRCUMFERENCE = 678;
// 进度 P (0.0 - 1.0)
const progress = Math.min(elapsedHours / targetHours, 1.0);
// 偏移量 Offset
const offset = CIRCUMFERENCE * (1 - progress);

```

### 2.3 动画过渡 (Motion)

* **属性控制**：仅对 `stroke-dashoffset` 和 `color` 属性应用过渡。
* **缓动函数**：`transition-all duration-1000 ease-in-out`。
* **性能优化**：对圆环容器使用 `will-change: stroke-dashoffset` 以开启 GPU 加速。

---

## 3. 🎨 生物节律映射与交互 (Bio-Rhythm Interaction)

圆环的视觉状态由 `elapsedHours` (已断食时长) 动态驱动。

### Phase 1: 消化期 (0 - 4 小时)

* **色调流**：`from-orange-400` -> `to-amber-500` (暖橙 -> 琥珀)。
* **隐喻**：余晖 (Afterglow)。
* **圆环动态**：
* 呼吸光晕：**极弱** (Opacity 10% -> 20%)，频率 6秒/次。
* 粒子特效：**无**。



### Phase 2: 平稳期 (4 - 12 小时)

* **色调流**：`from-emerald-500` -> `to-teal-600` (琥珀 -> 翡翠)。
* **隐喻**：森林 (Tranquility)。
* **圆环动态**：
* 呼吸光晕：**中等** (Opacity 20% -> 40%)，频率 5秒/次。
* 粒子特效：**无**。



### Phase 3: 燃脂期 (12 - 18 小时) 🔥 核心时刻

* **色调流**：`from-indigo-600` -> `to-purple-700` (深海蓝 -> 紫)。
* **隐喻**：深潜 (Deep Dive)。
* **圆环动态**：
* 呼吸光晕：**强烈** (Opacity 40% -> 70%)，频率 3秒/次 (模拟心跳加速)。
* 粒子特效：圆环头部出现微弱的紫色拖尾。



### Phase 4: 细胞自噬 (18小时 +) ✨

* **色调流**：`from-indigo-900` -> `to-amber-100` (极夜蓝 -> 星光金)。
* **隐喻**：星尘 (Stardust)。
* **圆环动态**：
* 呼吸光晕：**柔和而深沉**，频率 6秒/次。
* 粒子特效：**开启**。金色微粒在圆环周围缓慢浮动 (CSS animation)。



---

## 4. 📝 阶段文案多样性矩阵 (Content Diversity)

为了避免用户每次打开 APP 看到的文字都一样，我们需要建立一个**文案库**。每次进入 APP 或刷新状态时，从该阶段的库中**随机抽取**一条显示。

### 阶段 1：能量储存期 (0 - 4h)

*侧重：安抚、放松、消化科普*

| 方案 | 标题 (Label) | 副标题 (SubLabel) | 科学解释 (Desc) |
| --- | --- | --- | --- |
| **A (默认)** | 能量储存期 | 身体正在消化食物 | 胰岛素水平较高，身体处于合成代谢模式，正在吸收营养。 |
| **B (感性)** | 身体余晖 | 享受饱腹的满足感 | 不需要做任何事，让身体慢慢处理刚刚摄入的美味能量。 |
| **C (生理)** | 血糖上升期 | 胰岛素正在工作 | 此时血糖处于峰值，能量正在被输送到细胞中储存起来。 |

### 阶段 2：血糖平稳期 (4 - 12h)

*侧重：平稳、过渡、净化前奏*

| 方案 | 标题 (Label) | 副标题 (SubLabel) | 科学解释 (Desc) |
| --- | --- | --- | --- |
| **A (默认)** | 血糖平稳期 | 胰岛素正在下降 | 消化已结束，身体停止储存脂肪，静息系统开始接管。 |
| **B (感性)** | 宁静时刻 | 身体回归平静 | 就像森林在雨后恢复宁静，你的代谢系统正在休息。 |
| **C (生理)** | 糖原消耗中 | 脂肪的大门即将打开 | 肝糖原库存正在逐渐减少，身体准备切换到燃脂模式。 |

### 阶段 3：高效燃脂期 (12 - 18h)

*侧重：激励、成就感、脂肪燃烧*

| 方案 | 标题 (Label) | 副标题 (SubLabel) | 科学解释 (Desc) |
| --- | --- | --- | --- |
| **A (默认)** | 高效燃脂期 | 脂肪开始燃烧 | 肝糖原耗尽，身体切换燃料，开始直接分解脂肪供能。 |
| **B (感性)** | 深度潜水 | 探索身体的潜能 | 你正在经历断食最美妙的时刻，每一秒都在代谢陈旧脂肪。 |
| **C (生理)** | 酮体生成中 | 代谢灵活性建立 | 血液中酮体水平上升，大脑获得更清晰、更清洁的能量来源。 |

### 阶段 4：细胞自噬期 (18h +)

*侧重：抗衰老、修复、高级奖励*

| 方案 | 标题 (Label) | 副标题 (SubLabel) | 科学解释 (Desc) |
| --- | --- | --- | --- |
| **A (默认)** | 细胞自噬期 | 深层细胞净化 | 诺贝尔奖级修复机制启动，清理老化细胞组件，焕发新生。 |
| **B (感性)** | 星光焕新 | 逆转时光的魔法 | 身体正在进行大扫除，清除垃圾蛋白，让肌肤和器官更年轻。 |
| **C (生理)** | 生长激素激增 | 免疫系统重建 | 生长激素 (HGH) 大幅提升，保护肌肉并促进全身组织修复。 |

